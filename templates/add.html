{% extends "base.html" %}

{% block title %}Nouvelle Carte Grise{% endblock %}

{% block content %}
<h2>‚ûï Nouvelle Carte Grise</h2>

<div class="info-box">
    <p><strong>Information:</strong> Les num√©ros de carte grise et de plaque d'immatriculation seront g√©n√©r√©s automatiquement.</p>
</div>

<form method="POST" action="{{ url_for('add_carte_grise') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Informations du Propri√©taire</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="nom">Nom *</label>
            <input type="text" id="nom" name="nom" required placeholder="Dupont">
        </div>
        
        <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
            <input type="text" id="prenom" name="prenom" required placeholder="Jean">
        </div>
    </div>
    
    <div class="form-group">
        <label for="adresse">Adresse *</label>
        <input type="text" id="adresse" name="adresse" required placeholder="15 Rue de la Paix, 75001 Paris">
    </div>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Informations du V√©hicule</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="modele_id">Marque et Mod√®le *</label>
            <select id="modele_id" name="modele_id" required>
                <option value="">-- S√©lectionnez un mod√®le --</option>
                {% for modele in modeles %}
                <option value="{{ modele.id }}">{{ modele.marque_nom }} - {{ modele.modele }} ({{ modele.type_vehicule }})</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="date_premiere_immat">Date de Premi√®re Immatriculation *</label>
            <input type="date" id="date_premiere_immat" name="date_premiere_immat" required min="2020-01-01" max="2026-12-31">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="poids_vide">Poids √† vide (kg) *</label>
            <input type="number" id="poids_vide" name="poids_vide" required min="100" placeholder="1200">
        </div>
        
        <div class="form-group">
            <label for="poids_max">Poids maximal (kg) *</label>
            <input type="number" id="poids_max" name="poids_max" required min="100" placeholder="1800">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="categorie_permis">Cat√©gorie de Permis *</label>
            <select id="categorie_permis" name="categorie_permis" required>
                <option value="">-- S√©lectionnez --</option>
                <option value="A1">A1 - Moto l√©g√®re</option>
                <option value="A2">A2 - Moto moyenne</option>
                <option value="A">A - Moto</option>
                <option value="B">B - Automobile</option>
                <option value="C">C - Camion l√©ger</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="places_assises">Nombre de places assises</label>
            <input type="number" id="places_assises" name="places_assises" min="1" max="50" placeholder="5">
        </div>
    </div>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Caract√©ristiques Techniques (Optionnel)</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="cylindree">Cylindr√©e (cm¬≥)</label>
            <input type="number" id="cylindree" name="cylindree" min="0" placeholder="1560">
        </div>
        
        <div class="form-group">
            <label for="puissance_chevaux">Puissance (chevaux)</label>
            <input type="number" id="puissance_chevaux" name="puissance_chevaux" min="0" placeholder="130">
        </div>
    </div>
    
    <div class="form-group">
        <label for="emission_co2">√âmission CO2 (g/km)</label>
        <input type="number" id="emission_co2" name="emission_co2" min="0" placeholder="110">
    </div>
    
    <div class="actions" style="margin-top: 30px;">
        <button type="submit" class="btn btn-success">üíæ Cr√©er la Carte Grise</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚ùå Annuler</a>
    </div>
</form>
{% endblock %}
