{% extends "base.html" %}

{% block title %}Nouvelle Carte Grise{% endblock %}

{% block content %}
<h2>‚ûï Nouvelle Carte Grise</h2>

<div class="info-box">
    <p><strong>Information:</strong> Les num√©ros de carte grise et de plaque d'immatriculation seront g√©n√©r√©s automatiquement.</p>
</div>

<form method="POST" action="{{ url_for('add_carte_grise') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Informations du Propri√©taire</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="nom">Nom *</label>
            <input type="text" id="nom" name="nom" required placeholder="Dupont">
        </div>
        
        <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
            <input type="text" id="prenom" name="prenom" required placeholder="Jean">
        </div>
    </div>
    
    <div class="form-group">
        <label for="adresse">Adresse *</label>
        <input type="text" id="adresse" name="adresse" required placeholder="15 Rue de la Paix, 75001 Paris">
    </div>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Informations du V√©hicule</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="modele_id">Marque et Mod√®le *</label>
            <select id="modele_id" name="modele_id" required>
                <option value="">-- S√©lectionnez un mod√®le --</option>
                <optgroup label="Honda">
                <option value="1">Honda - CB500F (Deux roues - A2)</option>
                <option value="2">Honda - CBR1000RR (Deux roues - A)</option>
                <option value="3">Honda - Civic (Automobile - B)</option>
                <option value="4">Honda - CR-V (Automobile - B)</option>
                <option value="5">Honda - NT400 (Camion l√©ger - C)</option>
                <option value="6">Honda - Cabstar 35 (Camion l√©ger - C)</option>
            </optgroup>

            <optgroup label="Peugeot">
                <option value="7">Peugeot - Kisbee 50 (Deux roues - A1)</option>
                <option value="8">Peugeot - Metropolis (Deux roues - A)</option>
                <option value="9">Peugeot - 208 (Automobile - B)</option>
                <option value="10">Peugeot - 5008 (Automobile - B)</option>
                <option value="11">Peugeot - Boxer 440 (Camion l√©ger - C)</option>
                <option value="12">Peugeot - Expert L3 (Camion l√©ger - C)</option>
            </optgroup>

            <optgroup label="Renault">
                <option value="13">Renault - Full 125 (Deux roues - A1)</option>
                <option value="14">Renault - Sport 400 (Deux roues - A2)</option>
                <option value="15">Renault - Clio (Automobile - B)</option>
                <option value="16">Renault - Austral (Automobile - B)</option>
                <option value="17">Renault - Master 3.5t (Camion l√©ger - C)</option>
                <option value="18">Renault - Maxity (Camion l√©ger - C)</option>
            </optgroup>

            <optgroup label="Mercedes-Benz">
                <option value="19">Mercedes - Citan Scooter (Deux roues - A1)</option>
                <option value="20">Mercedes - Vision GT (Deux roues - A)</option>
                <option value="21">Mercedes - Classe A (Automobile - B)</option>
                <option value="22">Mercedes - GLC (Automobile - B)</option>
                <option value="23">Mercedes - Sprinter 5t (Camion l√©ger - C)</option>
                <option value="24">Mercedes - Vario (Camion l√©ger - C)</option>
            </optgroup>

            <optgroup label="Iveco">
                <option value="25">Iveco - Daily Moto (Deux roues - A2)</option>
                <option value="26">Iveco - Turbo Bike (Deux roues - A)</option>
                <option value="27">Iveco - Massif (Automobile - B)</option>
                <option value="28">Iveco - Campagnola (Automobile - B)</option>
                <option value="29">Iveco - Daily 35C (Camion l√©ger - C)</option>
                <option value="30">Iveco - Daily 50C (Camion l√©ger - C)</option>
            </optgroup>

            <optgroup label="Ford">
                <option value="31">Ford - Street 125 (Deux roues - A1)</option>
                <option value="32">Ford - Ranger Bike (Deux roues - A2)</option>
                <option value="33">Ford - Fiesta (Automobile - B)</option>
                <option value="34">Ford - Focus (Automobile - B)</option>
                <option value="35">Ford - Transit 350 (Camion l√©ger - C)</option>
                <option value="36">Ford - Transit 470 (Camion l√©ger - C)</option>
            </optgroup>
            
                {% for modele in modeles %}
                <option value="{{ modele.id }}">{{ modele.marque_nom }} - {{ modele.modele }} ({{ modele.categorie_nom }})</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="date_premiere_immat">Date de Premi√®re Immatriculation *</label>
            <input type="date" id="date_premiere_immat" name="date_premiere_immat" required min="2020-01-01" max="2026-12-31">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="poids_vide">Poids √† vide (kg) *</label>
            <input type="number" id="poids_vide" name="poids_vide" required min="100" placeholder="1200">
        </div>
        
        <div class="form-group">
            <label for="poids_max">Poids maximal (kg) *</label>
            <input type="number" id="poids_max" name="poids_max" required min="100" placeholder="1800">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="categorie_permis">Cat√©gorie de Permis *</label>
            <select id="categorie_permis" name="categorie_permis" required>
                <option value="">-- S√©lectionnez --</option>
                <option value="A1">A1 - Moto l√©g√®re</option>
                <option value="A2">A2 - Moto moyenne</option>
                <option value="A">A - Moto</option>
                <option value="B">B - Automobile</option>
                <option value="C">C - Camion l√©ger</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="places_assises">Nombre de places assises</label>
            <input type="number" id="places_assises" name="places_assises" min="1" max="50" placeholder="5">
        </div>
    </div>
    
    <h3 style="margin-top: 20px; color: var(--primary-color);">Caract√©ristiques Techniques (Optionnel)</h3>
    
    <div class="form-row">
        <div class="form-group">
            <label for="cylindree">Cylindr√©e (cm¬≥)</label>
            <input type="number" id="cylindree" name="cylindree" min="0" placeholder="1560">
        </div>
        
        <div class="form-group">
            <label for="puissance_chevaux">Puissance (chevaux)</label>
            <input type="number" id="puissance_chevaux" name="puissance_chevaux" min="0" placeholder="130">
        </div>
    </div>
    
    <div class="form-group">
        <label for="emission_co2">√âmission CO2 (g/km)</label>
        <input type="number" id="emission_co2" name="emission_co2" min="0" placeholder="110">
    </div>
    
    <div class="actions" style="margin-top: 30px;">
        <button type="submit" class="btn btn-success">üíæ Cr√©er la Carte Grise</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚ùå Annuler</a>
    </div>
</form>
{% endblock %}
